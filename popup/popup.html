<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Privacy Checker</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <header>
      <h1 class="text-white mt-5 mb-lg-4">
        <span class="brand-em">개</span><span class="brand">인</span><span class="brand-em">정</span><span class="brand">보</span><span class="brand-em">와</span><span class="brand">드</span>
      </h1>
    </header>

    <div class="tablist" role="tablist" aria-label="Popup views">
      <button
        class="tab active"
        id="tab-score"
        role="tab"
        aria-selected="true"
        aria-controls="panel-score"
        data-target="panel-score"
      >
        분석
      </button>
      <button
        class="tab"
        id="tab-news"
        role="tab"
        aria-selected="false"
        aria-controls="panel-news"
        data-target="panel-news"
      >
        뉴스
      </button>
      <button
        class="tab"
        id="tab-settings"
        role="tab"
        aria-selected="false"
        aria-controls="panel-settings"
        data-target="panel-settings"
      >
        설정
      </button>
    </div>

    <section
      id="panel-score"
      class="tab-panel active"
      role="tabpanel"
      aria-labelledby="tab-score"
    >
      <button id="scan" type="button">분석하기</button>
      <div id="status" aria-live="polite"></div>
      <div id="inlineResult" class="inline-overlay" aria-live="polite"></div>
    </section>

    <section
      id="panel-news"
      class="tab-panel"
      role="tabpanel"
      aria-labelledby="tab-news"
      hidden
    >
      <div class="frame-wrap">
        <iframe
          id="newsFrame"
          title="News reel"
          src="about:blank"
          loading="lazy"
          allow="fullscreen"
        ></iframe>
        <p class="hint" id="newsHintFull">
          This view wraps your site&apos;s news reel directly in the popup.
        </p>
        <div id="newsLinks" class="news-links" hidden>
          <p class="hint" id="newsHintFree">무료 버전에서는 알림 대신 링크를 제공합니다.</p>
          <a
            id="newsLinkPrimary"
            class="news-link"
            href="https://gaeinjjeongbo.netlify.app/news-only"
            target="_blank"
            rel="noopener noreferrer"
          >
            개인정보와드 뉴스 피드 열기
          </a>
          <a class="news-link" href="https://gaeinjjeongbo.netlify.app/" target="_blank" rel="noopener noreferrer">
            개인정보와드 사이트 방문
          </a>
        </div>
      </div>
    </section>

    <section
      id="panel-settings"
      class="tab-panel"
      role="tabpanel"
      aria-labelledby="tab-settings"
      hidden
    >
      <div class="setting-card">
        <div class="setting-head">
          <div>
            <div class="setting-title">무료 버전 (요약 모드)</div>
            <div class="setting-subtitle">
              /api/checkSummary로 요청을 보내 짧은 결과와 전체 보기 링크를 제공합니다. 뉴스 탭은 링크만 노출됩니다.
            </div>
          </div>
          <label class="switch">
            <input type="checkbox" id="freeModeToggle" />
            <span class="slider"></span>
          </label>
        </div>
      </div>
      <div class="setting-card">
        <div class="setting-head">
          <div>
            <div class="setting-title">Pre-analysis prompt</div>
            <div class="setting-subtitle">
              Show a prompt on detected 개인정보 text and only send for analysis when you click send.
            </div>
          </div>
          <label class="switch">
            <input type="checkbox" id="prePromptToggle" />
            <span class="slider"></span>
          </label>
        </div>
      </div>
      <div class="setting-card">
        <div class="setting-head setting-head--stack">
          <div>
            <div class="setting-title">Reset analysis cache</div>
            <div class="setting-subtitle">
              Clears stored 분석 결과 so the next request fetches fresh data.
            </div>
          </div>
          <button id="clearCache" type="button" class="ghost-button">Reset cache</button>
        </div>
        <div id="cacheStatus" class="setting-note" aria-live="polite"></div>
      </div>
    </section>

    <script src="popup.js"></script>
  </body>
</html>
